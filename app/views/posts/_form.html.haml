= render :partial => 'shared/resource_error', locals: {resource: post}

= form_for post, html: { multipart: true, class: "editor-form row gt-3 dropzone"  , data: { page: 'main-editor' }, autocomplete: "off" } do |f|
  = recaptcha_v3(action: 'post')

  %label.picture_upload
    = f.file_field :picture, class: 'form-control'
    %i.fa.fa-camera
  .file-upload-previewer.hidden
    %img#image_preview{:src => ""}/
  - if post.picture?
    #existing-img-previewer.existing-img-previewer
      = image_tag post.picture.url(:thumb)
  .input-group.col-12
    = f.label :title, class: ' form-label'
    = f.text_field :title, class: 'editor-title form-control' , placeholder: 'Title', autofocus: true, data: { behavior: "autosave" }, onfocus: "this.value = this.value;"
  .input-group.col-12.mt-4
    -# = f.label :content, class: ' form-label'
    -#.col-md-2
    -#  = f.select :language, options_for_select(Post::LANGUAGES, post.language), {include_blank: 'Code Language'}, {class: 'form-control'}
    = f.rich_text_area :body, class: 'medium-editable form-control mt-2'
>>>>>>> f0c5487 (rename code)
  .col-12.mt-4
    =f.trix_editor :lead, autofocus: true

  .col-12.mt-4
    = f.label :tags, class: 'form-label'
    = f.text_field :all_tags, class: 'form-control tagsinput', 'data-role': 'tagsinput', value: tag_from_param(post)

  = render :partial => 'meta_fields', locals: {f: f}

  = render :partial => 'post_buttons', locals: {f: f, resource: post}


:javascript
  $(document).ready( function() {
      $(".tagsinput").tagsinput('items');

     var preview = $("#image_preview");
      $('input[type="file"]').change(function(event){
         var input = $(event.currentTarget);
         var file = this.files[0];
         var reader = new FileReader();
         reader.onload = function(e){
             image_base64 = e.target.result;
             preview.attr("src", image_base64);
         };
         reader.readAsDataURL(file);
      });
    });

